{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["'use strict';\nimport axios from 'axios';\n\nasync function fetchImages(query, page) {\n  const apiKey = '44064586-c85ee0d0f4282a04fbc0070f7';\n  //   const url = `https://pixabay.com/api/?key=${apiKey}&q=${encodeURIComponent(\n  //     query\n  //   )}&image_type=photo&orientation=horizontal&safesearch=true`;\n  const url = 'https://pixabay.com/api/';\n  const queryParams = {\n    key: apiKey,\n    q: query,\n    safesearch: true,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    per_page: 15,\n    page: page,\n  };\n\n  const config = { params: queryParams };\n\n  try {\n    const response = await axios.get(url, config);\n    return response.data;\n  } catch (error) {\n    throw error;\n  }\n}\nexport default fetchImages;\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst renderImages = async images => {\n  if (images.length === 0) {\n    return iziToast.error({\n      message: `Sorry, there are no images matching your search. Please try again!`,\n    });\n  }\n\n  let galleryHtml = '';\n  const galleryList = document.querySelector('.gallery-list');\n  if (galleryList != null) {\n    galleryHtml = galleryList.innerHTML;\n  }\n  galleryHtml += await images\n    .map(img => {\n      return `\n        <li class=\"gallery-item\" id=${img.id}>\n          <a class=\"gallery-link\" href=\"${img.largeImageURL}\"><img src=\"${img.webformatURL}\" alt=\"${img.tags}\"></a>\n            <ul class=\"item-info\">\n              <li><h3>Likes</h3><p>${img.likes}</p></li>\n              <li><h3>Views</h3><p>${img.views}</p></li> \n              <li><h3>Comments</h3><p>${img.comments}</p></li> \n              <li><h3>Downloads</h3><p>${img.downloads}</p></li> \n            </ul> \n        </li>\n    `;\n    })\n    .join('');\n  gallery.innerHTML = `<ul class=\"gallery gallery-list\">${galleryHtml}</ul>`;\n\n  var lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 300,\n  });\n  lightbox.refresh();\n};\n\nexport default renderImages;\n","'use strict';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport fetchImages from './js/pixabay-api';\nimport renderImages from './js/render-functions';\n\nconst form = document.getElementById('searchForm');\nconst input = document.getElementById('searchInput');\nconst loader = document.getElementById('loader');\nconst gallery = document.getElementById('gallery');\n\nconst buttonmore = document.getElementById('load_more_btn');\nbuttonmore.style.display = 'none';\n\nlet page = 1;\nlet query = '';\nconst handleClick = () => {\n  page += 1;\n  getImages(page);\n};\nbuttonmore.addEventListener('click', handleClick);\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  query = input.value.trim();\n  if (query === '') {\n    iziToast.error({\n      title: 'Error:',\n      message: 'Please enter a search term.',\n      position: 'topRight',\n    });\n    return;\n  }\n  gallery.innerHTML = '';\n  page = 1;\n  getImages(page);\n  form.reset();\n  return;\n});\n\nconst getImages = async page => {\n  try {\n    loader.style.display = 'block';\n    buttonmore.style.display = 'none';\n    const response = await fetchImages(query, page);\n    const images = response.hits;\n    await renderImages(images);\n    if (page > 1) {\n      galleryScroll();\n    }\n    if (response.total <= page * 15) {\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n      return;\n    }\n    buttonmore.style.display = 'inline-block';\n  } catch (error) {\n    iziToast.error({\n      title: 'Error:',\n      message:\n        'An error occurred while fetching images. Please try again later.',\n    });\n  } finally {\n    loader.style.display = 'none';\n  }\n};\n\nconst galleryScroll = () => {\n  const galleryItem = document.querySelector('.gallery-item');\n  const rect = galleryItem.getBoundingClientRect();\n  const scrollValue = rect.height * 2;\n  window.scrollBy({\n    top: scrollValue,\n    left: 0,\n    behavior: 'smooth',\n  });\n};\n"],"names":["fetchImages","query","page","apiKey","url","config","axios","error","renderImages","images","galleryHtml","galleryList","img","lightbox","SimpleLightbox","form","input","loader","gallery","buttonmore","handleClick","getImages","event","iziToast","response","galleryScroll","scrollValue"],"mappings":"owBAGA,eAAeA,EAAYC,EAAOC,EAAM,CACtC,MAAMC,EAAS,qCAITC,EAAM,2BAWNC,EAAS,CAAE,OAVG,CAClB,IAAKF,EACL,EAAGF,EACH,WAAY,GACZ,WAAY,QACZ,YAAa,aACb,SAAU,GACV,KAAMC,CACV,GAIE,GAAI,CAEF,OADiB,MAAMI,EAAM,IAAIF,EAAKC,CAAM,GAC5B,IACjB,OAAQE,EAAO,CACd,MAAMA,CACP,CACH,CCxBA,MAAMC,EAAe,MAAMC,GAAU,CACnC,GAAIA,EAAO,SAAW,EACpB,OAAO,SAAS,MAAM,CACpB,QAAS,oEACf,CAAK,EAGH,IAAIC,EAAc,GAClB,MAAMC,EAAc,SAAS,cAAc,eAAe,EACtDA,GAAe,OACjBD,EAAcC,EAAY,WAE5BD,GAAe,MAAMD,EAClB,IAAIG,GACI;AAAA,sCACyBA,EAAI,EAAE;AAAA,0CACFA,EAAI,aAAa,eAAeA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA,qCAEvEA,EAAI,KAAK;AAAA,qCACTA,EAAI,KAAK;AAAA,wCACNA,EAAI,QAAQ;AAAA,yCACXA,EAAI,SAAS;AAAA;AAAA;AAAA,KAIjD,EACA,KAAK,EAAE,EACV,QAAQ,UAAY,oCAAoCF,CAAW,QAEnE,IAAIG,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,GAClB,CAAG,EACDD,EAAS,QAAO,CAClB,EC7BME,EAAO,SAAS,eAAe,YAAY,EAC3CC,EAAQ,SAAS,eAAe,aAAa,EAC7CC,EAAS,SAAS,eAAe,QAAQ,EACzCC,EAAU,SAAS,eAAe,SAAS,EAE3CC,EAAa,SAAS,eAAe,eAAe,EAC1DA,EAAW,MAAM,QAAU,OAE3B,IAAIjB,EAAO,EACPD,EAAQ,GACZ,MAAMmB,EAAc,IAAM,CACxBlB,GAAQ,EACRmB,EAAUnB,CAAI,CAChB,EACAiB,EAAW,iBAAiB,QAASC,CAAW,EAEhDL,EAAK,iBAAiB,SAAU,MAAMO,GAAS,CAI7C,GAHAA,EAAM,eAAc,EAEpBrB,EAAQe,EAAM,MAAM,OAChBf,IAAU,GAAI,CAChBsB,EAAS,MAAM,CACb,MAAO,SACP,QAAS,8BACT,SAAU,UAChB,CAAK,EACD,MACD,CACDL,EAAQ,UAAY,GACpBhB,EAAO,EACPmB,EAAUnB,CAAI,EACda,EAAK,MAAK,CAEZ,CAAC,EAED,MAAMM,EAAY,MAAMnB,GAAQ,CAC9B,GAAI,CACFe,EAAO,MAAM,QAAU,QACvBE,EAAW,MAAM,QAAU,OAC3B,MAAMK,EAAW,MAAMxB,EAAYC,EAAOC,CAAI,EACxCO,EAASe,EAAS,KAKxB,GAJA,MAAMhB,EAAaC,CAAM,EACrBP,EAAO,GACTuB,IAEED,EAAS,OAAStB,EAAO,GAAI,CAC/BqB,EAAS,KAAK,CACZ,QAAS,4DACjB,CAAO,EACD,MACD,CACDJ,EAAW,MAAM,QAAU,cAC5B,MAAe,CACdI,EAAS,MAAM,CACb,MAAO,SACP,QACE,kEACR,CAAK,CACL,QAAY,CACRN,EAAO,MAAM,QAAU,MACxB,CACH,EAEMQ,EAAgB,IAAM,CAG1B,MAAMC,EAFc,SAAS,cAAc,eAAe,EACjC,wBACA,OAAS,EAClC,OAAO,SAAS,CACd,IAAKA,EACL,KAAM,EACN,SAAU,QACd,CAAG,CACH"}